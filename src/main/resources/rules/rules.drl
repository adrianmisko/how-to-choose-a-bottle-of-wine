package sample;
import java.sql.SQLOutput
import sample.Result

global Controller controller;

rule "Who is it for?"
    when

    then
        Question question = new Question("Who is going to drink it?");
        question.getPossibleAnswers().add("Personal use");
        question.getPossibleAnswers().add("Someone else");
        controller.newQuestion(question);
end


rule "It's for someone else"
    when
        Answer(text == "Someone else", questionText == "Who is going to drink it?")
    then
        Question question = new Question("Are you at a social gathering?");
        question.getPossibleAnswers().add("Yes");
        question.getPossibleAnswers().add("No");
        controller.newQuestion(question);
end


rule "I'm at a social gathering"
    when
        a: Answer(text == "Yes", questionText == "Are you at a social gathering?")
    then
        Question question = new Question("What kind of gathering?");
        question.getPossibleAnswers().add("Art opening");
        question.getPossibleAnswers().add("Beach BBQ");
        question.getPossibleAnswers().add("Dinner party");
        question.getPossibleAnswers().add("Bachelor(ette) party");
        question.getPossibleAnswers().add("Get together");
        controller.newQuestion(question);
end


rule "I'm not at a social gathering"
    when
        Answer(text == "Yes", questionText == "Do you know them?") or
        Answer(text == "No", questionText == "Are you at a social gathering?")
    then
        Question question = new Question("Are they wine lovers?");
        question.getPossibleAnswers().add("Yes");
        question.getPossibleAnswers().add("No");
        controller.newQuestion(question);
end


rule "They're wine lovers"
    when
        Answer(text == "Yes", questionText == "Are they wine lovers?")
        Answer(text == "No", questionText == "Are you at a social gathering?")
    then
        Question question = new Question("Do you really know them?");
        question.getPossibleAnswers().add("Yes");
        question.getPossibleAnswers().add("No");
        controller.newQuestion(question);
end


rule "I really know them"
    when
        Answer(text == "Yes", questionText == "Do you really know them?") or
        (Answer(text == "Yes", questionText == "Are they wine lovers?") and
        Answer(text == "Yes", questionText == "Do you know them?"))
    then
        Question question = new Question("Are they your favourite people in the world? Be honest.");
        question.getPossibleAnswers().add("Yes");
        question.getPossibleAnswers().add("No");
        controller.newQuestion(question);
end


rule "They are my favourite people in the world"
    when
        Answer(text == "Yes", questionText == "Are they your favourite people in the world? Be honest.") or
        Answer(text == "1st", questionText == "Which anniversary?") or
        Answer(text == "Old", questionText == "Somebody who's old person or young?")
    then
        Result result =  new Result("Hedonistic joy ride CALIFORNIA PINOT NOIR", "California Pinot Noir.png");
        controller.showResult(result);
end


rule "It is art opening"
    when
        Answer(text == "Art opening", questionText == "What kind of gathering?")
    then
        Result result =  new Result("They rarely have a sense of taste 2-BUCK CHUCK", "2_buck_chuck.jpg");
        controller.showResult(result);
end


rule "It's beach BBQ"
    when
        Answer(text == "Beach BBQ", questionText == "What kind of gathering?")
    then
        Result result =  new Result("Bought a nice bottle but it was confiscated. No glass on the beach", "no_glass.jpg");
        controller.showResult(result);
end


rule "It's a dinner party"
    when
        Answer(text == "Dinner party", questionText == "What kind of gathering?")
    then
        Question question = new Question("Who is cooking?");
        question.getPossibleAnswers().add("Them");
        question.getPossibleAnswers().add("Me");
        controller.newQuestion(question);
end


rule "They are cooking"
    when
        Answer(text == "Them", questionText == "Who is cooking?")
    then
        Result result =  new Result("Buy the biggest bottle WITH THE WORDS 'RED BLEND'", "red_blend.jpg");
        controller.showResult(result);
end


rule "I am cooking or They aren't wine lovers or I not really know them or They aren't my favourite people in the world"
    when
        Answer(text == "Me", questionText == "Who is cooking?") or
        Answer(text == "No", questionText == "Are they wine lovers?") or
        Answer(text == "No", questionText == "Do you really know them?") or
        Answer(text == "No", questionText == "Are they your favourite people in the world? Be honest.")
    then
        Result result =  new Result("They don't deserve wine. Get out of my flowchart", "go_away.png");
        controller.showResult(result);
end


rule "It's bachelor(ette) party"
    when
        Answer(text == "Bachelor(ette) party", questionText == "What kind of gathering?")
    then
        Result result =  new Result("Leave your wine at home BRING WHISKEY OR VODKA", "Whiskey-or-Vodka.jpg");
        controller.showResult(result);
end


rule "It's get together"
    when
        Answer(text == "Get together", questionText == "What kind of gathering?")
    then
        Question question = new Question("Do you know them?");
        question.getPossibleAnswers().add("Yes");
        question.getPossibleAnswers().add("No");
        controller.newQuestion(question);
end


rule "I know them"
    when
        Answer(text == "Yes", questionText == "Do you know them?")
    then
        Question question = new Question("Are they wine lovers?");
        question.getPossibleAnswers().add("Yes");
        question.getPossibleAnswers().add("No");
        controller.newQuestion(question);
end


rule "I don't know them"
    when
        Answer(text == "No", questionText == "Do you know them?")
    then
        Result result =  new Result("Bring a boring bottle & HOPE NO ONE OPENS IT", "boring.jpg");
        controller.showResult(result);
end


rule "It's for personal use"
    when
        Answer(text == "Personal use", questionText == "Who is going to drink it?")
    then
        Question question = new Question("Are you at home?");
        question.getPossibleAnswers().add("Yes");
        question.getPossibleAnswers().add("No");
        controller.newQuestion(question);
end


rule "I am not at home"
    when
        Answer(text == "No", questionText == "Are you at home?")
    then
        Question question = new Question("What occasion is it?");
        question.getPossibleAnswers().add("Drinking in public");
        question.getPossibleAnswers().add("Camping");
        question.getPossibleAnswers().add("Dinner");
        question.getPossibleAnswers().add("Restaurant");
        question.getPossibleAnswers().add("Special occasions");
        controller.newQuestion(question);
end


rule "It's drinking in public or camping"
    when
        Answer(text == "Drinking in public" || text == "Camping", questionText == "What occasion is it?")
    then
        Result result =  new Result("No cork screw reo SINGLE SERVE BOX WINE", "singleserve.jpg");
        controller.showResult(result);
end


rule "It's dinner"
    when
        Answer(text == "Dinner", questionText == "What occasion is it?") or
        Answer(text == "No", questionText == "Are you alone at home?")
    then
        Question question = new Question("Is wine the main course?");
        question.getPossibleAnswers().add("Yes");
        question.getPossibleAnswers().add("No");
        controller.newQuestion(question);
end


rule "Wine is the main course"
    when
        Answer(text == "Yes", questionText == "Is wine the main course?") or
        Answer(text == "OUI.", questionText == "Are you going to feeling fancy?") or
        Answer(text == "Yes", questionText == "Are you alone at New Years Eve?")
    then
        Result result =  new Result("Go for something exotic SANGIOVESE or GRENACHE", "grenache-vs-sangiovese.jpg");
        controller.showResult(result);
end


rule "Wine is not the main course"
    when
        Answer(text == "No", questionText == "Is wine the main course?")
    then
        Question question = new Question("Is it dinner from a microwave?");
        question.getPossibleAnswers().add("Yes");
        question.getPossibleAnswers().add("No");
        controller.newQuestion(question);
end


rule "It's dinner from a microwave"
    when
        Answer(text == "Yes", questionText == "Is it dinner from a microwave?") or
        Answer(text == "Yes", questionText == "Is it order from a window?")
    then
        Result result =  new Result("Go budget. Go bulk. 3 LITER BOX WINE", "3-liters.jpg");
        controller.showResult(result);
end


rule "It's not dinner from a microwave"
    when
        Answer(text == "No", questionText == "Is it dinner from a microwave?")
    then
        Question question = new Question("Are you cooking /W your wine?");
        question.getPossibleAnswers().add("Yes");
        question.getPossibleAnswers().add("No");
        controller.newQuestion(question);
end


rule "I am cooking my wine"
    when
        Answer(text == "Yes", questionText == "Are you cooking /W your wine?")
    then
        Result result =  new Result("Wine &<$9 such as SAUVIGNON BLANC", "SauvBlanc_WEB.jpg");
        controller.showResult(result);
end


rule "I am not cooking my wine"
    when
        Answer(text == "No", questionText == "Are you cooking /W your wine?") or
        Answer(text == "Yes", questionText == "Are you daily drinking wine?")
    then
        Question question = new Question("Are you kool-aid man?");
        question.getPossibleAnswers().add("Yes");
        question.getPossibleAnswers().add("No");
        controller.newQuestion(question);
end


rule "I am kool-aid man"
    when
        Answer(text == "Yes", questionText == "Are you kool-aid man?")
    then
        Result result =  new Result("Fruit forward wine ARGENTINIAN MALBEC", "Argentinian-Malbec.jpg");
        controller.showResult(result);
end


rule "I am not kool-aid man"
    when
        Answer(text == "No", questionText == "Are you kool-aid man?")
    then
        Question question = new Question("Did you use to eat dirt as a child?");
        question.getPossibleAnswers().add("Yum");
        question.getPossibleAnswers().add("No");
        controller.newQuestion(question);
end


rule "I used to eat dirt as a child"
    when
        Answer(text == "Yum", questionText == "Did you use to eat dirt as a child?")
    then
        Result result =  new Result("Something earthy CHINON or BOURGUEIL", "bourgueil-vs-chinon.jpg");
        controller.showResult(result);
end


rule "I didn't use to eat dirt as a child"
    when
        Answer(text == "No", questionText == "Did you use to eat dirt as a child?")
    then
        Question question = new Question("Did you have the spray butter in your mouth?");
        question.getPossibleAnswers().add("Yep");
        question.getPossibleAnswers().add("No!");
        controller.newQuestion(question);
end


rule "I had the spray butter in my mouth"
    when
        Answer(text == "Yep", questionText == "Did you have the spray butter in your mouth?")
    then
        Result result =  new Result("Please bring me my BUTTERY CHARDONNAY", "chardonney.png");
        controller.showResult(result);
end


rule "I didn't have the spray butter in my mouth"
    when
        Answer(text == "No!", questionText == "Did you have the spray butter in your mouth?") or
        Answer(text == "What?", questionText == "Is your wine collection new or old world?")
    then
        Result result =  new Result("Thx for playin' now get out of my flowchart", "go_away.png");
        controller.showResult(result);
end


rule "I am at home"
    when
        Answer(text == "Yes", questionText == "Are you at home?")
    then
        Question question = new Question("Are you alone at home?");
        question.getPossibleAnswers().add("Yes");
        question.getPossibleAnswers().add("No");
        controller.newQuestion(question);
end


rule "I am alone at home"
    when
        Answer(text == "Yes", questionText == "Are you alone at home?")
    then
        Question question = new Question("Are you recovering from work?");
        question.getPossibleAnswers().add("Yes");
        question.getPossibleAnswers().add("No");
        controller.newQuestion(question);
end


rule "I am recovering from work"
    when
        Answer(text == "Yes", questionText == "Are you recovering from work?")
    then
        Result result =  new Result("Sniff your class of PINOT NOIR", "Pinot-Noir.jpg");
        controller.showResult(result);
end


rule "I am not recovering from work"
    when
        Answer(text == "No", questionText == "Are you recovering from work?")
    then
        Question question = new Question("Are you going to getting drunk?");
        question.getPossibleAnswers().add("Yes");
        question.getPossibleAnswers().add("No");
        controller.newQuestion(question);
end


rule "I am going to geting drunk"
    when
        Answer(text == "Yes", questionText == "Are you going to getting drunk?")
    then
        Result result =  new Result("Go for high octane ZINFANDEL or SHIRAZ", "shiraz-vs-zinfandel.jpg");
        controller.showResult(result);
end


rule "I am not going to geting drunk"
    when
        Answer(text == "No", questionText == "Are you going to getting drunk?")
    then
        Question question = new Question("Are you going to feeling fancy?");
        question.getPossibleAnswers().add("OUI.");
        question.getPossibleAnswers().add("No");
        controller.newQuestion(question);
end


rule "I am not going to feeling fancy"
    when
        Answer(text == "No", questionText == "Are you going to feeling fancy?")
    then
        Question question = new Question("Are you daily drinking wine?");
        question.getPossibleAnswers().add("Yes");
        question.getPossibleAnswers().add("No");
        controller.newQuestion(question);
end


rule "I am not daily drinking wine"
    when
        Answer(text == "No", questionText == "Are you daily drinking wine?") or
        Answer(text == "Yes", questionText == "Can you pronounce the menu?")
    then
        Question question = new Question("Is your wine collection new or old world?");
        question.getPossibleAnswers().add("Old!");
        question.getPossibleAnswers().add("New");
        question.getPossibleAnswers().add("What?");
        controller.newQuestion(question);
end


rule "My collection is old"
    when
        Answer(text == "Old!", questionText == "Is your wine collection new or old world?")
    then
        Result result =  new Result("Why but anything but BORDEAUX or BURGUNDY", "bourgogne-vs-bordeaux.jpg");
        controller.showResult(result);
end


rule "My collection is new"
    when
        Answer(text == "New", questionText == "Is your wine collection new or old world?")
    then
        Question question = new Question("Are you into cults?");
        question.getPossibleAnswers().add("Yes");
        question.getPossibleAnswers().add("No");
        controller.newQuestion(question);
end


rule "I am into cults"
    when
        Answer(text == "Yes", questionText == "Are you into cults?")
    then
        Result result =  new Result("Cult classic SINE QUA NON or CAYUSE", "sine_qua_non-vs-cayuse.jpg");
        controller.showResult(result);
end


rule "I am not into cults"
    when
        Answer(text == "No", questionText == "Are you into cults?") or
        Answer(text == "No", questionText == "Is it order from a window?")
    then
        Result result =  new Result("Drink a bottle of sun CALIFORNIA CABERNET", "california_cabernet.jpg");
        controller.showResult(result);
end


rule "It's restaurant"
    when
        Answer(text == "Restaurant", questionText == "What occasion is it?")
    then
        Question question = new Question("Is it a fancy restaurant?");
        question.getPossibleAnswers().add("Yes");
        question.getPossibleAnswers().add("No");
        controller.newQuestion(question);
end

rule "It's not a fancy restaurant"
    when
        Answer(text == "No", questionText == "Is it a fancy restaurant?")
    then
        Question question = new Question("Is it order from a window?");
        question.getPossibleAnswers().add("Yes");
        question.getPossibleAnswers().add("No");
        controller.newQuestion(question);
end


rule "It's a fancy restaurant"
    when
        Answer(text == "Yes", questionText == "Is it a fancy restaurant?")
    then
        Question question = new Question("Can you pronounce the menu?");
        question.getPossibleAnswers().add("Yes");
        question.getPossibleAnswers().add("No");
        controller.newQuestion(question);
end


rule "I can't pronounce the menu"
    when
        Answer(text == "No", questionText == "Can you pronounce the menu?")
    then
        Result result =  new Result("Ask for COTES DU RHONE", "Cotes-du-Rhone.png");
        controller.showResult(result);
end


rule "It's a special occasion"
    when
        Answer(text == "Special occasions", questionText == "What occasion is it?")
    then
        Question question = new Question("What special occasion is it?");
        question.getPossibleAnswers().add("Anniversary");
        question.getPossibleAnswers().add("Eloping");
        question.getPossibleAnswers().add("Birthday");
        question.getPossibleAnswers().add("Blind date");
        question.getPossibleAnswers().add("New Years Eve");
        controller.newQuestion(question);
end


rule "It's anniversary"
    when
        Answer(text == "Anniversary", questionText == "What special occasion is it?")
    then
        Question question = new Question("Which anniversary?");
        question.getPossibleAnswers().add("1st");
        question.getPossibleAnswers().add("2+");
        controller.newQuestion(question);
end


rule "It's 2+ anniversary"
    when
        Answer(text == "2+", questionText == "Which anniversary?")
    then
        Result result =  new Result("Complacency is a bitch MERLOT", "merlot-scheda.png");
        controller.showResult(result);
end


rule "It's birthday"
    when
        Answer(text == "Birthday", questionText == "What special occasion is it?")
    then
        Question question = new Question("Somebody who's old person or young?");
        question.getPossibleAnswers().add("Old");
        question.getPossibleAnswers().add("Young");
        controller.newQuestion(question);
end


rule "It's birthday of young person"
    when
        Answer(text == "Young", questionText == "Somebody who's old person or young?") or
        Answer(text == "Eloping", questionText == "What special occasion is it?") or
        Answer(text == "Blind date", questionText == "What special occasion is it?")
    then
        Result result =  new Result("Something sweet RIESLING or CHENIN BLANC", "cheninblanc-vs-riesling.jpg");
        controller.showResult(result);
end


rule "Is's New Years Eve"
    when
        Answer(text == "New Years Eve", questionText == "What special occasion is it?")
    then
        Question question = new Question("Are you alone at New Years Eve?");
        question.getPossibleAnswers().add("Yes");
        question.getPossibleAnswers().add("No");
        controller.newQuestion(question);
end


rule "Is's New Years Eve not alone"
    when
        Answer(text == "No", questionText == "Are you alone at New Years Eve?")
    then
        Result result =  new Result("Cheap bubbly SPANISH CAVA", "spanish_cava.jpg");
        controller.showResult(result);
end